<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {% block head_content %}{% endblock %}


    {% load static %}
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="{% static 'css/main.css' %}" />
    <script>
      const like = async (event, post) => {
        event.preventDefault()
        let user =  document.getElementById(`form-like-${post}`).elements.namedItem("user").value
        let csrfmiddlewaretoken = document.getElementById(`form-like-${post}`).elements.namedItem("csrfmiddlewaretoken").value
        let data = new FormData()
        data.append('csrfmiddlewaretoken', csrfmiddlewaretoken)
        data.append('user', user)
        data.append('post', post)

        let response = await fetch(`posts/${post}/like`, {
          method: 'POST',
          body: data,
          credentials: 'same-origin',
        })
        let { status } = await response.json()
        if (status == true){
          event.target.parentElement.style.color = 'red'
          let text = event.target.parentElement.nextElementSibling
          text.innerHTML = parseInt(text.innerHTML)+1
        } else {
          event.target.parentElement.style.color = 'black'
          let text = event.target.parentElement.nextElementSibling
          text.innerHTML = parseInt(text.innerHTML)-1
        }
      }
    </script>
</head>
<body>

    {% include "nav.html" %}

    <div class="container mt-5">
        {% block container %}
        {% endblock%}
    </div>

    
</body>
</html>